---
- name: install needed packages for deployment host
  yum:
    name:
      - autoconf
      - postgresql-devel
      - vim
      - mercurial
      - git
        #  - python-argcomplete
      - jq
      - bash-completion
    # - bash-completion-extras
      - ncdu
      - dos2unix
    state: latest
  become: "true"

- name: "Install Development tools"
  command:
    cmd: sudo yum groupinstall "Development Tools" -y
  become: true

- name: install pip packages
  pip:
    name:
      - boto
      - botocore
      - boto3
      - cryptography
      - visidata
      - PyYAML
    executable: /usr/bin/pip3
  become: true

- name: install git
  yum:
    name: git
    state: present
  tags: git
  become: true

- name: allow gitusername environment variable over ssh
  ansible.builtin.lineinfile:
    path: /etc/ssh/sshd_config
    line: 'AcceptEnv gitusername'
  tags: git
  become: true
  register: sshdchanged

- name: restart sshd if config file changed
  systemd:
    name: sshd
    state: restarted
  become: yes
  when: sshdchanged.changed is true
  tags: git

- name: allow gittoken environment variable over ssh
  ansible.builtin.lineinfile:
    path: /etc/ssh/sshd_config
    line: 'AcceptEnv gittoken'
  tags: git
  become: true
  register: sshdchanged

- name: restart sshd if config file changed
  systemd:
    name: sshd
    state: restarted
  become: yes
  when: sshdchanged.changed is true
  tags: git

- name: allow gitemail environment variable over ssh
  ansible.builtin.lineinfile:
    path: /etc/ssh/sshd_config
    line: 'AcceptEnv gitemail'
  tags: git
  become: true
  register: sshdchanged

- name: restart sshd if config file changed
  systemd:
    name: sshd
    state: restarted
  become: yes
  when: sshdchanged.changed is true
  tags: git

- name: allow gitname  environment variable over ssh
  ansible.builtin.lineinfile:
    path: /etc/ssh/sshd_config
    line: 'AcceptEnv gitname'
  tags: git
  become: true
  register: sshdchanged

- name: restart sshd if config file changed
  systemd:
    name: sshd
    state: restarted
  become: yes
  when: sshdchanged.changed is true
  tags: git

- name: install ansible
  pip:
    name:
      - ansible
    executable: /usr/bin/pip3
  become: true

- name: Install collection community.network
  command:
    cmd: "{{ item }}"
  with_items:
    - "ansible-galaxy collection install amazon.aws"
   #  - "ansible-galaxy collection install ansible.posix"
  become: true
  tags: never
  changed_when: true

- name: ensure that /etc/ansible exists
  ansible.builtin.file:
    path: /etc/ansible
    state: directory
  become: true
    # drwxr-xr-x

- name: configure default ansible.cfg
  template:
    src: ansible.cfg.j2
    dest: /etc/ansible/ansible.cfg
  become: true

- name: install ansible-lint
  pip:
    name:
      - ansible-lint
    executable: /usr/bin/pip3
  become: true

- name: configure ansible-lint
  debug:
    msg: https://ansible-lint.readthedocs.io/en/latest/configuring/

- name: install yamllint
  pip:
    name: yamllint
    executable: /usr/bin/pip3
  become: true

- name: Create .config Directory for yamllint
  ansible.builtin.file:
    path: "{{ item }}"
    state: directory
    mode: '0755'
  with_items:
    - ~/.config
    - ~/.config/yamllint
  tags: yamllint

- name: configure yamllint
  copy:
    src: yamllint_config
    dest: ~/.config/yamllint/config
  tags: yamllint

- name: pip install pre-commit
  pip:
    name: pre-commit
    executable: /usr/bin/pip3
  become: true
  tags: yamllint

- name: display message about precommit
  debug:
    msg: "https://ruleoftech.com/2017/git-pre-commit-and-pre-receive-hooks-validating-yaml"

#  sudo rpm --import http://packages.confluent.io/rpm/3.0/archive.key
#
# /etc/yum.repos.d/confluent.repo
#
#  [Confluent.dist]
#  name=Confluent repository (dist)
#  baseurl=http://packages.confluent.io/rpm/3.0/6
#  gpgcheck=1
#  gpgkey=http://packages.confluent.io/rpm/3.0/archive.key
#  enabled=1
#
#  [Confluent]
#  name=Confluent repository
#  baseurl=http://packages.confluent.io/rpm/3.0
#  gpgcheck=1
#  gpgkey=http://packages.confluent.io/rpm/3.0/archive.key
#  enabled=1
#
#
#  sudo yum install kafkacat
#
#
#  sudo yum install redis
#  sudo yum install gcc-c++ cmake
#  sudo yum install librdkafka-devel curl-devel
#
#
# to install redis for troubleshooting
# sudo amazon-linux-extras install redis4.0

# Download prereqs

# ./configure
# sudo make install
# which kcat
# mkdir ~/.config
# touch ~/.config/kcat.conf
# Add the config - !!!!!CHANGE THE BOOTSTRAP SERVER ADDRESS and PORT!!!!!
# cat << EOF > ~/.config/kcat.conf
# bootstrap.servers=b-1.nv-cpm-pb-capd-kafka.0smdbj.c14.kafka.us-east-1.amazonaws.com:9094
# enable.ssl.certificate.verification=false
# security.protocol=ssl
# EOF

- name: install confluent tools
  debug:
    msg: https://artifactory-pit.mmodal-npd.com/artifactory/mmodal-integration-pit/com/mmodal/CatalystApp/cdi/CdiTools/confluent-6.0.0.zip


- name: Create Bashrc directory
  ansible.builtin.file:
    path: "{{ item }}"
    state: directory
    mode: '0755'
  with_items:
    - ~/.bashrc.d

- name: template bashrc configurations
  template:
    src: "{{ item.src }}"
    dest: "{{ item.dest }}"
  with_items:
    - {src: 'bashrc.j2', dest: '~/.bashrc'}
    - {src: 'tmux.bash', dest: '~/.bashrc.d/tmux.bash'}
    - {src: 'exa.bash', dest: '~/.bashrc.d/exa.bash'}
    - {src: 'history.bash', dest: '~/.bashrc.d/history.bash'}
    - {src: 'fzf.bash.j2', dest: '~/.bashrc.d/fzf.bash'}
    - {src: 'ansible.bash', dest: '~/.bashrc.d/ansible.bash'}
    - {src: 'autojump.bash', dest: '~/.bashrc.d/autojump.bash'}
    - {src: 'kcat.bash', dest: '~/.bashrc.d/kcat.bash'}
    - {src: 'glow.bash', dest: '~/.bashrc.d/glow.bash'}
    - {src: 'terraform.bash', dest: '~/.bashrc.d/terraform.bash'}
  tags: bashrc

- name: template tmux Configuration
  template:
    src: "{{ item.src }}"
    dest: "{{ item.dest }}"
  with_items:
    - {src: 'tmux.conf.j2', dest: '~/.tmux.conf'}

- name: Create vim plugin directories
  ansible.builtin.file:
    path: "{{ item }}"
    state: directory
    mode: '0755'
  with_items:
    - ~/.vim/pack/git-plugins/start
  tags: vim

- name: clone ale plugin repo
  ansible.builtin.git:
    repo: https://github.com/dense-analysis/ale.git
    dest: ~/.vim/pack/git-plugins/start/ale
    depth: 1
    version: v3.2.0
  tags: vim
  diff: false

- name: clone ansible-vim plugin repo
  ansible.builtin.git:
    repo: https://github.com/pearofducks/ansible-vim
    dest: ~/.vim/pack/git-plugins/start/ansible-vim
    depth: 1
    version: 3.2
  tags: vim
  diff: false

- name: clone indentLine plugin repo
  ansible.builtin.git:
    repo: https://github.com/Yggdroot/indentLine.git
    dest: ~/.vim/pack/git-plugins/start/indentline
    depth: 1
    version: v2.0
  tags: vim
  diff: false

- name: template vimrc
  template:
    src: vimrc.j2
    dest: ~/.vimrc
  tags: vim

- name: Create Installers Directories
  ansible.builtin.file:
    path: "{{ item }}"
    state: directory
    mode: '0755'
    owner: "{{ ansible_user | default(ansible_env.USER) }}"
  become: true
  with_items:
    - /opt/installers
    - /opt/installers/glow
    - /opt/installers/exa
    - /opt/installers/terraform
    - /opt/installers/difftastic
    - /opt/installers/tig
    - /opt/installers/entr
  tags: bat, difftastic, entr, epel, exa, fd, fzf, git, glow, hostname, kcat, lazydocker, libcaca, lnav

- name: clone fzf repo
  ansible.builtin.git:
    repo: https://github.com/junegunn/fzf.git
    dest: ~/.fzf
    depth: 1
    version: 0.33.0
  tags: fzf
  diff: false

- name: dowload fzf binary
  command:
    chdir: ~/.fzf
    cmd: ./install --bin
  tags: fzf

- name: install fzf
  copy:
    src: ~/.fzf/bin/fzf
    dest: /usr/bin/fzf
    mode: 0755
  tags: fzf
  become: true

- name: install .fzf.bash provided by FZF package
  template:
    src: fzf_setup_completion_keybindings.bash.j2
    dest: ~/.fzf.bash
  tags: fzf

- name: retreive fd version
  command:
    cmd: "fd --version"
  register: fd_version_before_install
  changed_when: false
  ignore_errors: true

- name: Download fd
  ansible.builtin.get_url:
    url: https://github.com/sharkdp/fd/releases/download/v8.3.2/fd-v8.3.2-x86_64-unknown-linux-musl.tar.gz
    dest: /opt/installers/fd.tar.gz
  tags: fd
  when: fd_version_before_install.failed

- name: Extract fd
  ansible.builtin.unarchive:
    src: /opt/installers/fd.tar.gz
    dest: /opt/installers
  tags: fd
  when: fd_version_before_install.failed

- name: Install fd
  copy:
    src: "/opt/installers/fd-v8.3.2-x86_64-unknown-linux-musl/{{ item.src }}"
    dest: "{{ item.dest }}"
    mode: 0755
  with_items:
    - {src: 'fd', dest: '/usr/bin/fd'}
  become: true
  when: fd_version_before_install.failed
  tags: fd

- name: Install fd autocomplete
  copy:
    src: "/opt/installers/fd-v8.3.2-x86_64-unknown-linux-musl/{{ item.src }}"
    dest: "{{ item.dest }}"
  with_items:
    - {src: 'autocomplete/fd.bash', dest: '~/.bashrc.d/fd.bash'}
  tags: fd
  when: fd_version_before_install.failed

- name: retreive fd version
  command:
    cmd: "fd --version"
  register: fd_version_after_install
  tags: fd
  when: fd_version_before_install.failed

- name: set fd_version fact
  set_fact:
    fd_version: "{{ fd_version_after_install.stdout | default(fd_version_before_install.stdout) }}"
  tags: fd

- name: display fd version
  debug:
    msg: "fd Installed! for details see https://github.com  version is {{ fd_version }}"
  tags: fd

- name: Download bat
  ansible.builtin.get_url:
    url: https://github.com/sharkdp/bat/releases/download/v0.19.0/bat-v0.19.0-x86_64-unknown-linux-gnu.tar.gz
    dest: /opt/installers/bat.tar.gz
  tags: bat

- name: Unarchive bat
  ansible.builtin.unarchive:
    src: /opt/installers/bat.tar.gz
    dest: /opt/installers
  tags: bat

- name: Install bat
  copy:
    src: "/opt/installers/bat-v0.19.0-x86_64-unknown-linux-gnu/{{ item.src }}"
    dest: "{{ item.dest }}"
    mode: 0755
  with_items:
    - {src: 'bat', dest: '/usr/bin/bat'}
  become: true
  tags: bat

- name: Install bat autocomplete
  copy:
    src: "/opt/installers/bat-v0.19.0-x86_64-unknown-linux-gnu/{{ item.src }}"
    dest: "{{ item.dest }}"
  with_items:
    - {src: 'autocomplete/bat.bash', dest: '~/.bashrc.d/bat.bash'}

- name: retreive bat version
  command:
    cmd: "bat --version"
  register: bat_version
  tags: bat

- name: display bat version
  debug:
    msg: "Bat Installed! for details see https://github.com  version is {{ bat_version.stdout }}"
  tags: bat

- name: Download glow
  ansible.builtin.get_url:
    url: https://github.com/charmbracelet/glow/releases/download/v1.4.1/glow_1.4.1_linux_x86_64.tar.gz
    dest: /opt/installers/glow.tar.gz
  tags: glow

- name: Unarchive glow
  ansible.builtin.unarchive:
    src: /opt/installers/glow.tar.gz
    dest: /opt/installers/glow
  tags: glow

- name: Install glow
  copy:
    src: "/opt/installers/glow/{{ item.src }}"
    dest: "{{ item.dest }}"
    mode: 0755
  with_items:
    - {src: 'glow', dest: '/usr/bin/glow'}
  become: true
  tags: glow

- name: retrieve glow version
  command:
    cmd: "glow --version"
  register: glow_version
  tags: glow

- name: display glow verison
  debug:
    msg: "Glow Installed! for details see https://github.com  version is {{ glow_version.stdout }}"
  tags: glow

- name: Download exa
  ansible.builtin.get_url:
    url: https://github.com/ogham/exa/releases/download/v0.10.0/exa-linux-x86_64-v0.10.0.zip
    dest: /opt/installers/exa.zip
  tags: exa

- name: Extract exa
  ansible.builtin.unarchive:
    src: /opt/installers/exa.zip
    dest: /opt/installers/exa
  tags: exa

- name: Install exa
  copy:
    src: "/opt/installers/exa/bin/{{ item.src }}"
    dest: "{{ item.dest }}"
    mode: 0755
  with_items:
    - {src: 'exa', dest: '/usr/bin/exa'}
  become: true
  tags: exa

- name: retrieve exa version
  command:
    cmd: "exa --version"
  register: exa_version
  tags: exa

- name: display exa version
  debug:
    msg: "Exa Installed! for details see https://github.com  version is {{ exa_version.stdout }}"
  tags: exa

- name: install kcat packages
  yum:
    name:
      - cmake
      - jansson-devel
      - libcurl-devel
      - yajl-devel
      - snappy-devel
      - openssl-devel
      - zlib-devel
      - librdkafka-devel
      - curl-devel
      - lz4-devel
    state: latest
  become: "true"
  tags: kcat

- name: clone kafkacat
  ansible.builtin.git:
    repo: https://github.com/edenhill/kcat.git
    dest: /opt/installers/kcat
    depth: 1
    version: 1.7.1
  tags: kcat
  diff: false

- name: Run kcat bootstrap
  command:
    chdir: /opt/installers/kcat/
    cmd: ./bootstrap.sh
  tags: kcat,never


- name: Run kcat configure
  command:
    chdir: /opt/installers/kcat/
    cmd: ./configure
  tags: kcat,never

- name: Run kcat make
  command:
    chdir: /opt/installers/kcat/
    cmd: make
  tags: kcat,never

- name: Run kcat make
  command:
    chdir: /opt/installers/kcat/
    cmd: sudo make install
  tags: kcat,never

- name: confirm Kafkacat version
  command:
    cmd: "kcat -V"
  register: kcat_version
  tags: kcat,never

- name: print kafkacat version
  debug:
    msg: "Kafkacat Installed! for details see https://github.com  version is {{ kcat_version.stdout }}"
  tags: kcat,never

- name: install needed tig packages
  yum:
    name: ncurses-devel
    state: present
  become: true
  tags: tig

- name: clone tig
  ansible.builtin.git:
    repo: http://github.com/jonas/tig
    dest: /opt/installers/tig
    depth: 1
    version: tig-2.5.7
  tags: tig
  diff: false
  become: true

- name: run tig autogen
  command:
    chdir: /opt/installers/tig/
    cmd: ./autogen.sh
  tags: tig
  become: true

- name: Run tig configure
  command:
    chdir: /opt/installers/tig/
    cmd: ./configure
  tags: tig
  become: true

- name: Run tig make
  command:
    chdir: /opt/installers/tig/
    cmd: make
  tags: tig
  become: true

- name: Run tig make install
  command:
    chdir: /opt/installers/tig/
    cmd: sudo make install
  tags: tig
  become: true

- name: Copy Tig executable to /usr/bin/
  copy:
    src: /opt/installers/tig/src/tig
    dest: /usr/bin/tig
    remote_src: true
    mode: "0775"
  tags: tig
  become: true

- name: retrieve tig version
  shell:
    cmd: "/usr/bin/tig --version"
  register: tig_version
  tags: tig
  become: true

- name: display tig version
  debug:
    msg: "Tig Installed! for details see https://github.com  version is {{ tig_version.stdout }}"
  tags: tig

- name: clone entr
  ansible.builtin.git:
    repo: https://github.com/eradman/entr.git
    dest: /opt/installers/entr
    depth: 1
    version: 5.2
  tags: entr
  become: true

- name: Run entr configure
  command:
    chdir: /opt/installers/entr/
    cmd: ./configure
  tags: entr
  become: true

- name: Run entr make
  command:
    chdir: /opt/installers/entr/
    cmd: make
  tags: entr
  become: true

- name: Run entr make install
  command:
    chdir: /opt/installers/entr/
    cmd: sudo make install
  tags: entr
  become: true

- name: Copy Entr executable to /usr/bin/
  copy:
    src: /opt/installers/entr/entr
    dest: /usr/bin/entr
    remote_src: true
    mode: "0775"
  tags: entr
  become: true

- name: retreive entr version
  command:
    cmd: "which entr"
  register: entr_version
  tags: entr

- name: display entr verison
  debug:
    msg: "Event Notify Test Runner Installed! for details see https://github.com/eradman/entr  version is {{ entr_version.stdout }}"
  tags: entr

- name: Download lnav
  ansible.builtin.get_url:
    url: https://github.com/tstack/lnav/releases/download/v0.10.1/lnav-0.10.1-musl-64bit.zip
    dest: /opt/installers/lnav.tar.gz
  tags: lnav

- name: Unarchive lnav
  ansible.builtin.unarchive:
    src: /opt/installers/lnav.tar.gz
    dest: /opt/installers/lnav
  tags: lnav

- name: Install lnav
  copy:
    src: "/opt/installers/lnav/lnav-0.10.1/{{ item.src }}"
    dest: "{{ item.dest }}"
    mode: 0755
  with_items:
    - {src: 'lnav', dest: '/usr/bin/lnav'}
  become: true
  tags: lnav

- name: check lnav version
  command:
    cmd: lnav -V
  register: lnav_version
  tags: lnav

- name: display lnav information
  debug:
    msg: "Lnav Log Navigator Installed! for details see https://github.com/tstack/lnav version is {{ lnav_version.stdout }}"
  tags: lnav


- name: Download Terraform
  ansible.builtin.get_url:
    url: https://releases.hashicorp.com/terraform/1.1.5/terraform_1.1.5_linux_amd64.zip
    dest: /opt/installers/terraform.zip
  tags: terraform

- name: Unarchive Terraform
  ansible.builtin.unarchive:
    src: /opt/installers/terraform.zip
    dest: /opt/installers/terraform
  tags: terraform

- name: Install terraform
  copy:
    src: "/opt/installers/terraform/{{ item.src }}"
    dest: "{{ item.dest }}"
    mode: 0755
  with_items:
    - {src: 'terraform', dest: '/usr/bin/terraform'}
  become: true
  tags: terraform,never

- name: Retrive Terraform version
  command:
    cmd: "terraform --version"
  register: terraform_version
  tags: terraform
  ignore_errors: true
  changed_when: false

- name: Display Terraform version
  debug:
    msg: "Terraform Installed! version is {{ terraform_version.stdout }}"
  tags: terraform

- name: configure Terraform Drift Detection cron script
  template:
    src: driftctl_cron.bash
    dest: /home/ec2-user/
    mode: '0755'
  tags: terraform,never
  when: account_env is defined

- name: configure Driftctl cron
  ansible.builtin.cron:
    name: DriftCTL Weekly Run
    state: absent

- name: clone autojump
  ansible.builtin.git:
    repo: https://github.com/wting/autojump.git
    dest: /opt/installers/autojump
    depth: 1
    version: release-v22.5.3
  tags: autojump

- name: Download Difftastic
  ansible.builtin.get_url:
    url: https://github.com/Wilfred/difftastic/releases/download/0.32.0/difft-x86_64-unknown-linux-gnu.tar.gz
    dest: /opt/installers/difftastic.zip
  tags: difftastic

- name: Unarchive Difftastic
  ansible.builtin.unarchive:
    src: /opt/installers/difftastic.zip
    dest: /opt/installers/difftastic
  tags: difftastic

- name: Install Difftastic
  copy:
    src: "/opt/installers/difftastic/{{ item.src }}"
    dest: "{{ item.dest }}"
    mode: 0755
  with_items:
    - {src: 'difft', dest: '/usr/bin/difft'}
  become: true
  tags: difftastic

- name: check current git diff tool git config --global diff.external
  command:
    cmd: git config --global diff.external
  register: current_git_diff
  tags: difftastic
  changed_when: false
  ignore_errors: true

- name: set Difftastic as default git diff
  command:
    cmd: git config --global diff.external difft
  tags: difftastic
  when: current_git_diff.stdout != 'difft'
# https://github.com/muesli/duf
# https://github.com/Wilfred/difftastic

# https://github.com/bcicen/ctop
# Motd

- name: install figlet package
  yum:
    name:
      - figlet
    state: latest
  become: "true"
  tags: motd

- name: add MOTD stop message in aws GI to alert developers to be good citizens
  template:
    src: motd/01-stop.sh.j2
    dest: /etc/update-motd.d/01-stop.sh
    mode: 0755
  become: true
  tags: motd
  when:
    - env is defined
    - env == 'aws-gi'

- name: display message to restart hosts after patching if they are not restarted.
  template:
    src: motd/80-needsrestarting.j2
    dest: /etc/update-motd.d/80-needsrestarting
    mode: 0755
  become: true
  tags: motd
  ignore_errors: true
  register: motd_status

- name: display message to restart hosts after patching if they are not restarted.
  template:
    src: motd/80-needsrestarting.j2
    dest: /etc/motd.d/80-needsrestarting
    mode: 0755
  become: true
  tags: motd
  when: motd_status.failed

- name: refresh motd
  command:
    cmd: /usr/bin/systemctl --quiet restart update-motd
  become: true
  tags: motd
  ignore_errors: true

- name: install posgtres 14
  command:
    cmd: amazon-linux-extras install postgresql14 -y
  become: true
  tags: postgres

- name: check postgres version
  command:
    cmd: psql --version
  tags: postgres
  register: postgres_version

- name: print postgres version
  debug:
    msg: "successfully installed posgress {{ postgres_version.stdout }}"
  tags: postgres

- name: make patching log folder
  ansible.builtin.file:
    path: /home/ec2-user/patching/
    state: directory
    mode: '0755'
  tags: patching
  when: patching_day is defined

- name: "add crontab gitname var to crontab"
  ansible.builtin.cron:
    name: gitname
    value: cron
    env: yes
  tags: patching

- name: "Configure patching cron. To see if it ran look in /var/log/cron. This also posts to #hccops"
  ansible.builtin.cron:
    name: Weekly Patching
    weekday: "{{ patching_day }}" # tuesday(2) ci, gi ct cqa thursday(4)  pa cpm
    minute: "0"
    hour: "{{ patching_hour | default('2') }}"
    user: ec2-user
    job: "cd {{ playbook_dir }}/..  ; /usr/local/bin/ansible-playbook capd-env-indep-deployment/yum-update-all-pb.yml &>> /home/ec2-user/patching/patching_output.log && needs-restarting -r || sudo reboot"
  when: patching_day is defined
  tags: patching

- name: Send a mail when the deployment server comes up
  ansible.builtin.cron:
    name: Mail when deploymet server comes up.
    special_time: reboot
    job: echo "{{ ansible_hostname }} has started sucessfully" | mail -s "{{ ansible_hostname }} has started sucessfully" US-MM-CAPD-DevOps@solventum.com
  tags: patching

- name: install mailx
  yum:
    name: mailx
    state: present
  become: true
  tags: mail

- name: configure mailx
  template:
    src: mailrc.j2
    dest: /home/ec2-user/.mailrc
    mode: '0755'
  tags: mail

# https://github.com/aws/amazon-ec2-instance-selector.git
# - name:
#   command: " curl -Lo ec2-instance-selector https://github.com/aws/amazon-ec2-instance-selector/releases/download/v2.4.0/ec2-instance-selector-`uname | tr '[:upper:]' '[:lower:]'`-amd64 && chmod +x ec2-instance-selector"


# wget https://releases.hashicorp.com/terraform/1.1.5/terraform_1.1.5_linux_amd64.zip


# copy config file


#
# copy config file


# - name: set up terraform repo
#         https://learn.hashicorp.com/tutorials/terraform/install-cli
#                 $ sudo yum-config-manager --add-repo https://rpm.releases.hashicorp.Fcom/RHEL/hashicorp.repo
# install hashicopr vault
# https://www.vaultproject.io/downloads
# https://releases.hashicorp.com/vault/1.5.5/vault_1.5.5_linux_amd64.zip
# unzip vault_1.5.5_linux_amd64.zip
# sudo cp vault /usr/bin/
# https://github.com/Wilfred/difftastic
